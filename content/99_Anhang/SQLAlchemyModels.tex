\subsection{SQLAlchemy-Modelle einer Radarkontrolle in MariaDB und PostGIS}
\label{sec:SQLAlchemyModels}

\begin{code}
\begin{minted}[
    linenos,
    numbersep=10pt,
    gobble=0,
    frame=lines,
    framesep=2mm]{python}
from sqlalchemy.orm import declarative_base
from sqlalchemy import Column, String, BigInteger, DateTime, Numeric

# See https://docs.sqlalchemy.org/en/13/changelog/migration_12.html#change-4102
class LiberalBoolean(TypeDecorator):
    impl = Boolean
    def process_bind_param(self, value, dialect):
        if value is not None:
            value = bool(int(value))
        return value

Base = declarative_base()

class ArchivedShownSpeedcam(Base):
    __database__ = 'speedcam_archive'
    __tablename__ = 'output_180d_dump'

    id = Column(BigInteger, primary_key=True, nullable=False, autoincrement=True)
    autobahn = Column(LiberalBoolean, nullable=False, default=False)
    cvmax = Column(String(3), nullable=False, default='')
    vmax = Column(String(3), nullable=False, default='')
    lastuse_date = Column(DateTime, nullable=False, default='0000-00-00 00:00:00')
    laenge = Column(Numeric(9, 6), nullable=False, default=0.0)
    breite = Column(Numeric(9, 6), nullable=False, default=0.0)
    direction = Column(String(3), nullable=False, default='')
    created_date = Column(DateTime, nullable=False, default='0000-00-00 00:00:00')
\end{minted}
\captionof{listing}{SQLAlchemy-Modell einer Radarkontrolle in MariaDB}
\label{lst:SQLAlchemyModelMariaDB}
\end{code}

% \begin{minipage}{\linewidth}
% \begin{lstlisting}[language={Python},
%     basicstyle=\footnotesize\ttfamily\linespread{1.3},
%     caption={SQLAlchemy-Modell einer Radarkontrolle in MariaDB},
%     captionpos=b, label=lst:SQLAlchemyModelMariaDB]
% from sqlalchemy.orm import declarative_base
% from sqlalchemy import Column, String, BigInteger, DateTime, Numeric

% # See https://docs.sqlalchemy.org/en/13/changelog/migration_12.html#change-4102
% class LiberalBoolean(TypeDecorator):
%     impl = Boolean
%     def process_bind_param(self, value, dialect):
%         if value is not None:
%             value = bool(int(value))
%         return value

% Base = declarative_base()

% class ArchivedShownSpeedcam(Base):
%     __database__ = 'speedcam_archive'
%     __tablename__ = 'output_180d_dump'

%     id = Column(BigInteger, primary_key=True, nullable=False, autoincrement=True)
%     autobahn = Column(LiberalBoolean, nullable=False, default=False)
%     cvmax = Column(String(3), nullable=False, default='')
%     vmax = Column(String(3), nullable=False, default='')
%     lastuse_date = Column(DateTime, nullable=False, default='0000-00-00 00:00:00')
%     laenge = Column(Numeric(9, 6), nullable=False, default=0.0)
%     breite = Column(Numeric(9, 6), nullable=False, default=0.0)
%     direction = Column(String(3), nullable=False, default='')
%     created_date = Column(DateTime, nullable=False, default='0000-00-00 00:00:00')

% \end{lstlisting}
% \end{minipage}
